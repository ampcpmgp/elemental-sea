import { describe, expect, it } from "vitest";
import { Formatter } from "./formatter";

describe("formatter", () => {
	it("should split text into lines", async () => {
		// Arrange
		const text =
			"ðŸŒðŸ”‹EUã¯2030å¹´ã¾ã§ã«å¹´é–“1,000ä¸‡ãƒˆãƒ³ã®å†ç”Ÿå¯èƒ½æ°´ç´ ç”Ÿç”£èƒ½åŠ›ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹ã‘ã©ã€PricewaterhouseCoopers (PwC) ã®å ±å‘Šæ›¸ã«ã‚ˆã‚‹ã¨ã€ç›®æ¨™é”æˆã«ã¯é…ã‚ŒãŒè¦‹ã‚‰ã‚Œã€è¼¸å…¥ä¾å­˜ãŒé«˜ã¾ã‚Šãã†ã ã‚ˆã€‚ðŸŒžðŸŒ¬ï¸EUå†…ã§ç™ºè¡¨ã•ã‚ŒãŸ205ã‚®ã‚¬ãƒ¯ãƒƒãƒˆ (GW) ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã§ã€2023å¹´æœ«ã¾ã§ã«æœ€çµ‚æŠ•è³‡æ±ºå®šã¾ãŸã¯å»ºè¨­ãŒå§‹ã¾ã£ãŸã®ã¯ãŸã£ãŸã®3GWã ã£ã¦ã€‚ðŸ’¸ðŸ› ï¸å†ç”Ÿå¯èƒ½æ°´ç´ ã®é«˜ã„ç”Ÿç”£ã‚³ã‚¹ãƒˆã¨è³¼å…¥è€…ã®æ”¯æ‰•æ„æ¬²ã®ä¹–é›¢ã€é›»è§£æ§½ã®å»ºè¨­ã‚³ã‚¹ãƒˆã®é«˜ã•ã€é¢¨åŠ›ã‚„å¤ªé™½å…‰ç™ºé›»ã®å°Žå…¥ãƒšãƒ¼ã‚¹ã®é…ã‚ŒãŒé–‹ç™ºé…å»¶ã®ä¸€å› ã«ãªã‚Šãã†ã€‚ðŸ—ï¸ðŸŒã•ã‚‰ã«ã€æ”¿åºœæ”¯æ´ã®ä¸è¶³ã‚„æ°´ç´ ã‚¤ãƒ³ãƒ•ãƒ©ã®ä¸è¶³ã€ç±³å›½ã‹ã‚‰ã®ãƒ–ãƒ«ãƒ¼æ°´ç´ ã®è¼¸å…¥ãŒäºˆæƒ³ã•ã‚Œã‚‹ãªã©ã€å†ç”Ÿå¯èƒ½æ°´ç´ é–‹ç™ºã«ã¯èª²é¡ŒãŒå±±ç©ã—ã¦ã„ã‚‹ã‹ã‚‚ï¼";

		const formatter = new Formatter(text);

		// Act
		const result = formatter.splitTextByEmoji();

		// Assert
		expect(formatter.lines).toStrictEqual([
			"ðŸŒðŸ”‹EUã¯2030å¹´ã¾ã§ã«å¹´é–“1,000ä¸‡ãƒˆãƒ³ã®å†ç”Ÿå¯èƒ½æ°´ç´ ç”Ÿç”£èƒ½åŠ›ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹ã‘ã©ã€PricewaterhouseCoopers (PwC) ã®å ±å‘Šæ›¸ã«ã‚ˆã‚‹ã¨ã€ç›®æ¨™é”æˆã«ã¯é…ã‚ŒãŒè¦‹ã‚‰ã‚Œã€è¼¸å…¥ä¾å­˜ãŒé«˜ã¾ã‚Šãã†ã ã‚ˆã€‚",
			"ðŸŒžðŸŒ¬ï¸EUå†…ã§ç™ºè¡¨ã•ã‚ŒãŸ205ã‚®ã‚¬ãƒ¯ãƒƒãƒˆ (GW) ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã§ã€2023å¹´æœ«ã¾ã§ã«æœ€çµ‚æŠ•è³‡æ±ºå®šã¾ãŸã¯å»ºè¨­ãŒå§‹ã¾ã£ãŸã®ã¯ãŸã£ãŸã®3GWã ã£ã¦ã€‚",
			"ðŸ’¸ðŸ› ï¸å†ç”Ÿå¯èƒ½æ°´ç´ ã®é«˜ã„ç”Ÿç”£ã‚³ã‚¹ãƒˆã¨è³¼å…¥è€…ã®æ”¯æ‰•æ„æ¬²ã®ä¹–é›¢ã€é›»è§£æ§½ã®å»ºè¨­ã‚³ã‚¹ãƒˆã®é«˜ã•ã€é¢¨åŠ›ã‚„å¤ªé™½å…‰ç™ºé›»ã®å°Žå…¥ãƒšãƒ¼ã‚¹ã®é…ã‚ŒãŒé–‹ç™ºé…å»¶ã®ä¸€å› ã«ãªã‚Šãã†ã€‚",
			"ðŸ—ï¸ðŸŒã•ã‚‰ã«ã€æ”¿åºœæ”¯æ´ã®ä¸è¶³ã‚„æ°´ç´ ã‚¤ãƒ³ãƒ•ãƒ©ã®ä¸è¶³ã€ç±³å›½ã‹ã‚‰ã®ãƒ–ãƒ«ãƒ¼æ°´ç´ ã®è¼¸å…¥ãŒäºˆæƒ³ã•ã‚Œã‚‹ãªã©ã€å†ç”Ÿå¯èƒ½æ°´ç´ é–‹ç™ºã«ã¯èª²é¡ŒãŒå±±ç©ã—ã¦ã„ã‚‹ã‹ã‚‚ï¼",
		]);
	});

	it("should append url to the second line", async () => {
		// Arrange
		const url = "https://example.com";
		const formatter = new Formatter("");
		formatter.lines = ["line1", "line2", "line3"];

		// Act
		const result = formatter.appendUrl(url);

		// Assert
		expect(formatter.lines).toStrictEqual([
			"line1",
			"https://example.com",
			"line2",
			"line3",
		]);
	});
});
